#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Pfad zu Node hinzufÃ¼gen (Windows)
export PATH="$PATH:/c/Users/BenediktBlazeowsky/Downloads/node-v22.20.0-win-x64/node-v22.20.0-win-x64"

echo "ğŸ” pre-commit: validate:data (offline)"
npm run validate:data || { echo "âŒ Daten-Validierung fehlgeschlagen"; exit 1; }
echo "ğŸŒ pre-push: validate:refs (online, Crossref)"
# etwas langsamer, um Rate-Limits zu schonen
SLOW_MS=300 npm run validate:refs
status=$?

if [ $status -ne 0 ]; then
  echo "âŒ Referenz-Validierung meldet FAIL â€“ Push abgebrochen."
  exit $status
fi

echo "âœ… Referenz-Validierung OK â€“ Push wird fortgesetzt."


